# 运维大盘

您也许会逐渐发现，平台内置的图表其实覆盖面是不足的。当您想统计出企业下所有机器的CPU使用率Top10，亦或是想查看项目下的各个应用的资源使用情况时，如何获取到相关的图表呢？此时，就到了运维大盘发挥上场了。

当下，基本所有的监控方的面产品都会有大盘功能，开源里常见的有大盘工具有[Grafana](https://grafana.com/), [Kinaba](https://www.elastic.co/cn/kibana/)。而Erda的大盘同样非常的强大，它能让您自有地选择如何呈现自己的数据，这些数据包括但不限于监控数据。

## 新建运维大盘

点击**运维大盘**功能块，映入眼帘的是已经创建的大盘列表。通过点击右上角的**新建运维大盘**，我们可以创建一个大盘。

![](http://terminus-paas.oss-cn-hangzhou.aliyuncs.com/paas-doc/2021/08/06/4ae6fe47-6332-4575-8a90-0bced4984bfc.png)

随后，出现的是一块空白的大盘，点击右上键的**编辑模式**，我们可以进入大盘的*编辑模式*

![](http://terminus-paas.oss-cn-hangzhou.aliyuncs.com/paas-doc/2021/08/06/d0b27a6c-e6ba-413e-994d-9e7b18332ead.png)

## 配置大盘

进入*编辑模式*后，就可以开始根据自己的需求配置大盘了，这里我以配置某个应用的CPU使用率折线图为例。

首先填写大盘标题（必填）和大盘描述：

![](http://terminus-paas.oss-cn-hangzhou.aliyuncs.com/paas-doc/2021/08/06/82e950d4-7edd-4e00-a980-61ee094301a4.png)

### 新建图表

然后，点击**➕**符号，新增图表，则进入了*配置图表*界面

![](http://terminus-paas.oss-cn-hangzhou.aliyuncs.com/paas-doc/2021/08/06/02ff71d4-6028-4c08-b6fe-1e7e6f06b71f.png)

#### 数据源配置

接下来，我们将进入数据源配置阶段，此阶段是最为重要的并且也有一定的使用门槛，需仔细配置：

1. 选择图表类型

    第一步，选择图表类型，目前大盘支持折线图、面积图等一共8种图表类型，这里我们选择折线图，当然您可以随时更改。

2. 指标分组

    第二步，选择指标分组，为方便用户找到合适的指标，我们对大量的指标进行了分组，您也可以直接搜索。这里我们选择项目资源下的实例资源。

3. 维度

    何为维度？可以理解为分组，类比于SQL中的`GROUP BY`，对于监控指标我们一般选择时间和容器ID。

4. 值

    具体的指标，并配置聚合方法，类比于SQL中的`SELECT avg(cpu_usage_percent)`，这里我们选择CPU使用率的平均值

5. 结果排序

    类比SQL中的`ORDER BY`

6. 结果截取

    类比SQL中的`LIMIT`

7. 固定图表时间范围

    指定范围后，图表的时间范围则固定死了，不会随整体时间范围变化而变化，例如5分钟表示只查询近5分钟的数据，一般不指定。

如此，点击确定后，我们就完成了某个应用的CPU使用率折线图的配置。

![](http://terminus-paas.oss-cn-hangzhou.aliyuncs.com/paas-doc/2021/08/06/46328e3c-93b0-40b9-bf1b-de94939308f9.png)



### 调整图表位置

之后，页面将回到*大盘编辑模式*，默认的图表大小往往不太合适，我们可以通过拖拉来调整它。

![](http://terminus-paas.oss-cn-hangzhou.aliyuncs.com/paas-doc/2021/08/06/06081eb6-b3be-46a4-bdfc-0ea2d5a283b0.png)

### 保存图表

最后，一定要记得点击**保存**按钮，保存我们的大盘。



## 查看大盘

此时，进入大盘页面，即可看到我们刚才创建的大盘。

![](/Users/wenming/Library/Application Support/typora-user-images/image-20210806152433488.png)

点击条目，即可进入大盘的展示页面，您可以通过调整时间范围，查看任意时间段的数据

![](http://terminus-paas.oss-cn-hangzhou.aliyuncs.com/paas-doc/2021/08/06/6e70a823-f23c-49fa-860c-4496c43e0761.png)



## 注意事项

可以看到，大盘配置还是比较容易上手的，但是上述配置只是最简单的一种，您也许有其他各种各样的图片需求，都可以通过大盘来实现。

不过，这需要对大盘了解更多才行，这里有一些资料，可供参考：

- 指标查询语言指南 // todo
- 可配置大盘详细说明 // todo
