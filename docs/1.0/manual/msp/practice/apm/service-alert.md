# 服务稳定性和性能告警配置

服务是否稳定运行，是用户体检的基础，只有尽可能的保障服务稳定，才可能留住更多用户。那么如何借助 Erda 监控功能来保障服务稳定呢？

首先我们需要知道服务不稳定可能存在哪些表象：

1. 服务突然异常卡顿
2. 服务无法访问了
3. 页面一直转圈圈

而这些表象可以归为两类问题：

1. 资源瓶颈
2. 性能瓶颈

针对这两类问题，可以借助 Erda 的告警功能做到预防，并且可以借助监控功能进行问题排查

## 资源瓶颈

此时可以配置容器资源使用的告警策略，一旦资源水位达到阈值，即可触发告警，及时处理。

![资源告警配置](http://terminus-paas.oss-cn-hangzhou.aliyuncs.com/paas-doc/2021/08/16/fa0c1ec3-13fc-42f0-9839-dfbb78ca0d5d.png)

目前内置的资源告警配置包含了以下：

- 应用实例CPU使用异常
    - 默认：当 CPU 使用率，持续一分钟之内，平均值大于等90%时触发告警
    - 建议：可将触发阈值修改为 70~80%，给处理人员一定的缓冲时间
- 应用实例内存使用率异常
    - 默认：当内存使用率，持续一分钟之内，平均值大于等90%时触发告警
    - 建议：可将触发阈值修改为 70~80%，给处理人员一定的缓冲时间
- 应用实例OOM
    - 默认：当出现OOM时，会触发 oomkilled, 此时触发告警
- 应用JVM GC 次数
    - 默认：3分钟内，触发 GC 次数大于 5 时，此时触发告警
- 应用JVM GC 耗时
    - 默认：GC 耗时的最大值大于等于 400ms, 或 GC 总和大于等于 1s 时触发告警
- 应用JVM堆内存
    - 默认：当 JVM 堆内存使用率，持续一分钟之内，平均值大于等75%时触发告警
- 应用NodeJS堆内存使用率
    - 默认：当 NodeJS 堆内存使用率，持续一分钟之内，平均值大于等75%时触发告警

## 性能瓶颈

出现性能问题，其实是个积极的变现，至少可以说明，用户量增加了，而这时要做的就是让服务可以承受更多用户的并发访问，可参考 [性能压测大盘](pressure-test-dashboard.md)，
排查各类慢请求，慢sql，从而来解决性能问题。